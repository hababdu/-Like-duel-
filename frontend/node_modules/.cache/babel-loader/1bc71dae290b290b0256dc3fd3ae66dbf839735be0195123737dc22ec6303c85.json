{"ast":null,"code":"var _jsxFileName = \"/Users/habibullo/Desktop/like-duel/frontend/src/contexts/SocketContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WEBSOCKET_URL = process.env.REACT_APP_WS_URL || 'ws://localhost:10000';\nconst SocketContext = /*#__PURE__*/createContext();\nexport const useSocket = () => {\n  _s();\n  const context = useContext(SocketContext);\n  if (!context) {\n    throw new Error('useSocket must be used within SocketProvider');\n  }\n  return context;\n};\n_s(useSocket, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const SocketProvider = ({\n  children\n}) => {\n  _s2();\n  const [socket, setSocket] = useState(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [connectionStatus, setConnectionStatus] = useState('disconnected');\n  const [reconnectAttempt, setReconnectAttempt] = useState(0);\n  const [pendingMessages, setPendingMessages] = useState([]);\n  const navigate = useNavigate();\n  const MAX_RECONNECT_ATTEMPTS = 5;\n  const RECONNECT_DELAY = 3000;\n\n  // Send message function\n  const sendMessage = useCallback((type, data = {}) => {\n    if ((socket === null || socket === void 0 ? void 0 : socket.readyState) === WebSocket.OPEN) {\n      const message = {\n        type,\n        ...data,\n        timestamp: Date.now(),\n        clientId: localStorage.getItem('clientId') || generateClientId()\n      };\n      socket.send(JSON.stringify(message));\n      return true;\n    } else {\n      // Queue message for later\n      setPendingMessages(prev => [...prev, {\n        type,\n        data\n      }]);\n\n      // Try to reconnect if disconnected\n      if (!isConnected && reconnectAttempt < MAX_RECONNECT_ATTEMPTS) {\n        connect();\n      }\n      return false;\n    }\n  }, [socket, isConnected, reconnectAttempt]);\n\n  // Generate unique client ID\n  const generateClientId = () => {\n    const id = 'client_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n    localStorage.setItem('clientId', id);\n    return id;\n  };\n\n  // Connect to WebSocket\n  const connect = useCallback(() => {\n    if ((socket === null || socket === void 0 ? void 0 : socket.readyState) === WebSocket.OPEN || (socket === null || socket === void 0 ? void 0 : socket.readyState) === WebSocket.CONNECTING) {\n      return;\n    }\n    setConnectionStatus('connecting');\n    try {\n      const ws = new WebSocket(WEBSOCKET_URL);\n      setSocket(ws);\n      ws.onopen = () => {\n        setIsConnected(true);\n        setConnectionStatus('connected');\n        setReconnectAttempt(0);\n\n        // Send pending messages\n        if (pendingMessages.length > 0) {\n          pendingMessages.forEach(msg => {\n            sendMessage(msg.type, msg.data);\n          });\n          setPendingMessages([]);\n        }\n        toast.success('Serverga ulandik!');\n        console.log('‚úÖ WebSocket connected');\n      };\n      ws.onclose = event => {\n        setIsConnected(false);\n        setConnectionStatus('disconnected');\n        if (!event.wasClean) {\n          console.log('‚ùå WebSocket connection lost');\n          toast.error('Server bilan aloqa uzildi');\n\n          // Attempt reconnect\n          if (reconnectAttempt < MAX_RECONNECT_ATTEMPTS) {\n            const delay = RECONNECT_DELAY * Math.pow(1.5, reconnectAttempt);\n            console.log(`üîÑ Reconnecting in ${delay}ms (attempt ${reconnectAttempt + 1})`);\n            setTimeout(() => {\n              setReconnectAttempt(prev => prev + 1);\n              connect();\n            }, delay);\n          } else {\n            toast.error('Serverga ulanish muvaffaqiyatsiz. Iltimos, sahifani yangilang.');\n          }\n        }\n      };\n      ws.onerror = error => {\n        console.error('WebSocket error:', error);\n        toast.error('Server bilan bog‚Äòlanishda xatolik');\n      };\n      ws.onmessage = event => {\n        try {\n          const message = JSON.parse(event.data);\n          handleIncomingMessage(message);\n        } catch (error) {\n          console.error('Message parsing error:', error);\n        }\n      };\n    } catch (error) {\n      console.error('WebSocket connection error:', error);\n      setConnectionStatus('error');\n    }\n  }, [socket, reconnectAttempt, pendingMessages, sendMessage]);\n\n  // Handle incoming messages\n  const handleIncomingMessage = useCallback(message => {\n    switch (message.type) {\n      case 'authenticated':\n        handleAuthentication(message);\n        break;\n      case 'match_found':\n        handleMatchFound(message);\n        break;\n      case 'game_result':\n        handleGameResult(message);\n        break;\n      case 'notification':\n        handleNotification(message);\n        break;\n      case 'chat_message':\n        handleChatMessage(message);\n        break;\n      case 'game_invitation':\n        handleGameInvitation(message);\n        break;\n      case 'tournament_started':\n        handleTournamentStarted(message);\n        break;\n      case 'error':\n        handleError(message);\n        break;\n      default:\n        console.log('Unhandled message type:', message.type);\n    }\n  }, [navigate]);\n\n  // Message handlers\n  const handleAuthentication = message => {\n    localStorage.setItem('userData', JSON.stringify(message.user));\n    localStorage.setItem('sessionId', message.sessionId);\n    toast.success(`Xush kelibsiz, ${message.user.firstName}!`);\n\n    // Navigate to home\n    navigate('/');\n  };\n  const handleMatchFound = message => {\n    const gameData = {\n      gameId: message.gameId,\n      opponent: message.opponent,\n      mode: message.gameMode,\n      rounds: message.rounds,\n      isRanked: message.isRanked,\n      status: 'starting'\n    };\n    localStorage.setItem('currentGame', JSON.stringify(gameData));\n\n    // Navigate to game room\n    navigate(`/game/${message.gameId}`);\n    toast.success(`Raqib topildi: ${message.opponent.firstName}`);\n  };\n  const handleGameResult = message => {\n    // Update game result\n    const gameResult = {\n      ...message,\n      finishedAt: new Date()\n    };\n    localStorage.setItem('lastGameResult', JSON.stringify(gameResult));\n\n    // Show result notification\n    if (message.winnerId === parseInt(localStorage.getItem('userId'))) {\n      toast.success('üéâ Tabriklaymiz! Siz yutdingiz!');\n    } else if (message.result === 'draw') {\n      toast('ü§ù Durang!');\n    } else {\n      toast.error('üòî Mag‚Äòlub bo‚Äòldingiz. Keyingi safar omad!');\n    }\n\n    // Navigate back to home\n    navigate('/');\n  };\n  const handleNotification = message => {\n    const notification = message.notification;\n    toast(notification.message, {\n      duration: 5000,\n      icon: getNotificationIcon(notification.type),\n      style: {\n        background: getNotificationColor(notification.type),\n        color: 'white'\n      }\n    });\n\n    // Store notification\n    const notifications = JSON.parse(localStorage.getItem('notifications') || '[]');\n    notifications.unshift(notification);\n    localStorage.setItem('notifications', JSON.stringify(notifications.slice(0, 50)));\n  };\n  const handleChatMessage = message => {\n    // Update chat room\n    const roomMessages = JSON.parse(localStorage.getItem(`chat_${message.roomId}`) || '[]');\n    roomMessages.push(message.message);\n    localStorage.setItem(`chat_${message.roomId}`, JSON.stringify(roomMessages.slice(-100)));\n\n    // Show notification if not in chat room\n    if (!window.location.pathname.includes('/chat/')) {\n      toast(`${message.message.senderName}: ${message.message.text}`, {\n        duration: 3000,\n        icon: 'üí¨'\n      });\n    }\n  };\n  const handleGameInvitation = message => {\n    // Store invitation\n    const invitations = JSON.parse(localStorage.getItem('invitations') || '[]');\n    invitations.push({\n      ...message,\n      receivedAt: new Date()\n    });\n    localStorage.setItem('invitations', JSON.stringify(invitations.slice(0, 20)));\n\n    // Show invitation toast\n    toast.custom(t => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"invitation-toast\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"\\uD83C\\uDFAE O'yin taklifi\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [message.inviter.firstName, \" sizni o'yinga taklif qildi\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"toast-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            sendMessage('respond_invitation', {\n              invitationId: message.invitationId,\n              response: 'accept'\n            });\n            toast.dismiss(t.id);\n          },\n          children: \"Qabul qilish\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            sendMessage('respond_invitation', {\n              invitationId: message.invitationId,\n              response: 'reject'\n            });\n            toast.dismiss(t.id);\n          },\n          children: \"Rad etish\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 7\n    }, this), {\n      duration: 60000\n    });\n  };\n  const handleTournamentStarted = message => {\n    navigate(`/tournament/${message.tournamentId}`);\n    toast.success(`Turnir boshladi: ${message.tournamentName}`);\n  };\n  const handleError = message => {\n    toast.error(message.message || 'Xatolik yuz berdi');\n    console.error('Server error:', message);\n  };\n\n  // Helper functions\n  const getNotificationIcon = type => {\n    switch (type) {\n      case 'game_invite':\n        return 'üéÆ';\n      case 'tournament_invite':\n        return 'üèÜ';\n      case 'friend_request':\n        return 'üë•';\n      case 'achievement':\n        return 'üèÖ';\n      default:\n        return 'üì¢';\n    }\n  };\n  const getNotificationColor = type => {\n    switch (type) {\n      case 'game_invite':\n        return '#3b82f6';\n      case 'tournament_invite':\n        return '#f59e0b';\n      case 'friend_request':\n        return '#10b981';\n      case 'achievement':\n        return '#8b5cf6';\n      default:\n        return '#64748b';\n    }\n  };\n\n  // Authentication function\n  const authenticate = (initData, deviceInfo) => {\n    sendMessage('authenticate', {\n      initData,\n      deviceInfo\n    });\n  };\n\n  // Connect on mount\n  useEffect(() => {\n    connect();\n\n    // Heartbeat interval\n    const heartbeatInterval = setInterval(() => {\n      if ((socket === null || socket === void 0 ? void 0 : socket.readyState) === WebSocket.OPEN) {\n        sendMessage('heartbeat');\n      }\n    }, 30000);\n\n    // Cleanup\n    return () => {\n      clearInterval(heartbeatInterval);\n      if ((socket === null || socket === void 0 ? void 0 : socket.readyState) === WebSocket.OPEN) {\n        socket.close();\n      }\n    };\n  }, []);\n\n  // Context value\n  const contextValue = {\n    socket,\n    isConnected,\n    connectionStatus,\n    sendMessage,\n    authenticate,\n    reconnect: connect\n  };\n  return /*#__PURE__*/_jsxDEV(SocketContext.Provider, {\n    value: contextValue,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 362,\n    columnNumber: 5\n  }, this);\n};\n_s2(SocketProvider, \"xhNY2KeL7Ffc3mkXW5ijfuKABg8=\", false, function () {\n  return [useNavigate];\n});\n_c = SocketProvider;\nvar _c;\n$RefreshReg$(_c, \"SocketProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useCallback","useNavigate","toast","jsxDEV","_jsxDEV","WEBSOCKET_URL","process","env","REACT_APP_WS_URL","SocketContext","useSocket","_s","context","Error","SocketProvider","children","_s2","socket","setSocket","isConnected","setIsConnected","connectionStatus","setConnectionStatus","reconnectAttempt","setReconnectAttempt","pendingMessages","setPendingMessages","navigate","MAX_RECONNECT_ATTEMPTS","RECONNECT_DELAY","sendMessage","type","data","readyState","WebSocket","OPEN","message","timestamp","Date","now","clientId","localStorage","getItem","generateClientId","send","JSON","stringify","prev","connect","id","Math","random","toString","substr","setItem","CONNECTING","ws","onopen","length","forEach","msg","success","console","log","onclose","event","wasClean","error","delay","pow","setTimeout","onerror","onmessage","parse","handleIncomingMessage","handleAuthentication","handleMatchFound","handleGameResult","handleNotification","handleChatMessage","handleGameInvitation","handleTournamentStarted","handleError","user","sessionId","firstName","gameData","gameId","opponent","mode","gameMode","rounds","isRanked","status","gameResult","finishedAt","winnerId","parseInt","result","notification","duration","icon","getNotificationIcon","style","background","getNotificationColor","color","notifications","unshift","slice","roomMessages","roomId","push","window","location","pathname","includes","senderName","text","invitations","receivedAt","custom","t","className","fileName","_jsxFileName","lineNumber","columnNumber","inviter","onClick","invitationId","response","dismiss","tournamentId","tournamentName","authenticate","initData","deviceInfo","heartbeatInterval","setInterval","clearInterval","close","contextValue","reconnect","Provider","value","_c","$RefreshReg$"],"sources":["/Users/habibullo/Desktop/like-duel/frontend/src/contexts/SocketContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport toast from 'react-hot-toast';\n\nconst WEBSOCKET_URL = process.env.REACT_APP_WS_URL || 'ws://localhost:10000';\n\nconst SocketContext = createContext();\n\nexport const useSocket = () => {\n  const context = useContext(SocketContext);\n  if (!context) {\n    throw new Error('useSocket must be used within SocketProvider');\n  }\n  return context;\n};\n\nexport const SocketProvider = ({ children }) => {\n  const [socket, setSocket] = useState(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [connectionStatus, setConnectionStatus] = useState('disconnected');\n  const [reconnectAttempt, setReconnectAttempt] = useState(0);\n  const [pendingMessages, setPendingMessages] = useState([]);\n  const navigate = useNavigate();\n\n  const MAX_RECONNECT_ATTEMPTS = 5;\n  const RECONNECT_DELAY = 3000;\n\n  // Send message function\n  const sendMessage = useCallback((type, data = {}) => {\n    if (socket?.readyState === WebSocket.OPEN) {\n      const message = {\n        type,\n        ...data,\n        timestamp: Date.now(),\n        clientId: localStorage.getItem('clientId') || generateClientId()\n      };\n      \n      socket.send(JSON.stringify(message));\n      return true;\n    } else {\n      // Queue message for later\n      setPendingMessages(prev => [...prev, { type, data }]);\n      \n      // Try to reconnect if disconnected\n      if (!isConnected && reconnectAttempt < MAX_RECONNECT_ATTEMPTS) {\n        connect();\n      }\n      \n      return false;\n    }\n  }, [socket, isConnected, reconnectAttempt]);\n\n  // Generate unique client ID\n  const generateClientId = () => {\n    const id = 'client_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n    localStorage.setItem('clientId', id);\n    return id;\n  };\n\n  // Connect to WebSocket\n  const connect = useCallback(() => {\n    if (socket?.readyState === WebSocket.OPEN || socket?.readyState === WebSocket.CONNECTING) {\n      return;\n    }\n\n    setConnectionStatus('connecting');\n    \n    try {\n      const ws = new WebSocket(WEBSOCKET_URL);\n      setSocket(ws);\n\n      ws.onopen = () => {\n        setIsConnected(true);\n        setConnectionStatus('connected');\n        setReconnectAttempt(0);\n        \n        // Send pending messages\n        if (pendingMessages.length > 0) {\n          pendingMessages.forEach(msg => {\n            sendMessage(msg.type, msg.data);\n          });\n          setPendingMessages([]);\n        }\n        \n        toast.success('Serverga ulandik!');\n        console.log('‚úÖ WebSocket connected');\n      };\n\n      ws.onclose = (event) => {\n        setIsConnected(false);\n        setConnectionStatus('disconnected');\n        \n        if (!event.wasClean) {\n          console.log('‚ùå WebSocket connection lost');\n          toast.error('Server bilan aloqa uzildi');\n          \n          // Attempt reconnect\n          if (reconnectAttempt < MAX_RECONNECT_ATTEMPTS) {\n            const delay = RECONNECT_DELAY * Math.pow(1.5, reconnectAttempt);\n            console.log(`üîÑ Reconnecting in ${delay}ms (attempt ${reconnectAttempt + 1})`);\n            \n            setTimeout(() => {\n              setReconnectAttempt(prev => prev + 1);\n              connect();\n            }, delay);\n          } else {\n            toast.error('Serverga ulanish muvaffaqiyatsiz. Iltimos, sahifani yangilang.');\n          }\n        }\n      };\n\n      ws.onerror = (error) => {\n        console.error('WebSocket error:', error);\n        toast.error('Server bilan bog‚Äòlanishda xatolik');\n      };\n\n      ws.onmessage = (event) => {\n        try {\n          const message = JSON.parse(event.data);\n          handleIncomingMessage(message);\n        } catch (error) {\n          console.error('Message parsing error:', error);\n        }\n      };\n    } catch (error) {\n      console.error('WebSocket connection error:', error);\n      setConnectionStatus('error');\n    }\n  }, [socket, reconnectAttempt, pendingMessages, sendMessage]);\n\n  // Handle incoming messages\n  const handleIncomingMessage = useCallback((message) => {\n    switch (message.type) {\n      case 'authenticated':\n        handleAuthentication(message);\n        break;\n        \n      case 'match_found':\n        handleMatchFound(message);\n        break;\n        \n      case 'game_result':\n        handleGameResult(message);\n        break;\n        \n      case 'notification':\n        handleNotification(message);\n        break;\n        \n      case 'chat_message':\n        handleChatMessage(message);\n        break;\n        \n      case 'game_invitation':\n        handleGameInvitation(message);\n        break;\n        \n      case 'tournament_started':\n        handleTournamentStarted(message);\n        break;\n        \n      case 'error':\n        handleError(message);\n        break;\n        \n      default:\n        console.log('Unhandled message type:', message.type);\n    }\n  }, [navigate]);\n\n  // Message handlers\n  const handleAuthentication = (message) => {\n    localStorage.setItem('userData', JSON.stringify(message.user));\n    localStorage.setItem('sessionId', message.sessionId);\n    \n    toast.success(`Xush kelibsiz, ${message.user.firstName}!`);\n    \n    // Navigate to home\n    navigate('/');\n  };\n\n  const handleMatchFound = (message) => {\n    const gameData = {\n      gameId: message.gameId,\n      opponent: message.opponent,\n      mode: message.gameMode,\n      rounds: message.rounds,\n      isRanked: message.isRanked,\n      status: 'starting'\n    };\n    \n    localStorage.setItem('currentGame', JSON.stringify(gameData));\n    \n    // Navigate to game room\n    navigate(`/game/${message.gameId}`);\n    \n    toast.success(`Raqib topildi: ${message.opponent.firstName}`);\n  };\n\n  const handleGameResult = (message) => {\n    // Update game result\n    const gameResult = {\n      ...message,\n      finishedAt: new Date()\n    };\n    \n    localStorage.setItem('lastGameResult', JSON.stringify(gameResult));\n    \n    // Show result notification\n    if (message.winnerId === parseInt(localStorage.getItem('userId'))) {\n      toast.success('üéâ Tabriklaymiz! Siz yutdingiz!');\n    } else if (message.result === 'draw') {\n      toast('ü§ù Durang!');\n    } else {\n      toast.error('üòî Mag‚Äòlub bo‚Äòldingiz. Keyingi safar omad!');\n    }\n    \n    // Navigate back to home\n    navigate('/');\n  };\n\n  const handleNotification = (message) => {\n    const notification = message.notification;\n    \n    toast(notification.message, {\n      duration: 5000,\n      icon: getNotificationIcon(notification.type),\n      style: {\n        background: getNotificationColor(notification.type),\n        color: 'white'\n      }\n    });\n    \n    // Store notification\n    const notifications = JSON.parse(localStorage.getItem('notifications') || '[]');\n    notifications.unshift(notification);\n    localStorage.setItem('notifications', JSON.stringify(notifications.slice(0, 50)));\n  };\n\n  const handleChatMessage = (message) => {\n    // Update chat room\n    const roomMessages = JSON.parse(localStorage.getItem(`chat_${message.roomId}`) || '[]');\n    roomMessages.push(message.message);\n    localStorage.setItem(`chat_${message.roomId}`, JSON.stringify(roomMessages.slice(-100)));\n    \n    // Show notification if not in chat room\n    if (!window.location.pathname.includes('/chat/')) {\n      toast(`${message.message.senderName}: ${message.message.text}`, {\n        duration: 3000,\n        icon: 'üí¨'\n      });\n    }\n  };\n\n  const handleGameInvitation = (message) => {\n    // Store invitation\n    const invitations = JSON.parse(localStorage.getItem('invitations') || '[]');\n    invitations.push({\n      ...message,\n      receivedAt: new Date()\n    });\n    localStorage.setItem('invitations', JSON.stringify(invitations.slice(0, 20)));\n    \n    // Show invitation toast\n    toast.custom((t) => (\n      <div className=\"invitation-toast\">\n        <h4>üéÆ O'yin taklifi</h4>\n        <p>{message.inviter.firstName} sizni o'yinga taklif qildi</p>\n        <div className=\"toast-actions\">\n          <button onClick={() => {\n            sendMessage('respond_invitation', {\n              invitationId: message.invitationId,\n              response: 'accept'\n            });\n            toast.dismiss(t.id);\n          }}>\n            Qabul qilish\n          </button>\n          <button onClick={() => {\n            sendMessage('respond_invitation', {\n              invitationId: message.invitationId,\n              response: 'reject'\n            });\n            toast.dismiss(t.id);\n          }}>\n            Rad etish\n          </button>\n        </div>\n      </div>\n    ), {\n      duration: 60000,\n    });\n  };\n\n  const handleTournamentStarted = (message) => {\n    navigate(`/tournament/${message.tournamentId}`);\n    toast.success(`Turnir boshladi: ${message.tournamentName}`);\n  };\n\n  const handleError = (message) => {\n    toast.error(message.message || 'Xatolik yuz berdi');\n    console.error('Server error:', message);\n  };\n\n  // Helper functions\n  const getNotificationIcon = (type) => {\n    switch (type) {\n      case 'game_invite': return 'üéÆ';\n      case 'tournament_invite': return 'üèÜ';\n      case 'friend_request': return 'üë•';\n      case 'achievement': return 'üèÖ';\n      default: return 'üì¢';\n    }\n  };\n\n  const getNotificationColor = (type) => {\n    switch (type) {\n      case 'game_invite': return '#3b82f6';\n      case 'tournament_invite': return '#f59e0b';\n      case 'friend_request': return '#10b981';\n      case 'achievement': return '#8b5cf6';\n      default: return '#64748b';\n    }\n  };\n\n  // Authentication function\n  const authenticate = (initData, deviceInfo) => {\n    sendMessage('authenticate', { initData, deviceInfo });\n  };\n\n  // Connect on mount\n  useEffect(() => {\n    connect();\n    \n    // Heartbeat interval\n    const heartbeatInterval = setInterval(() => {\n      if (socket?.readyState === WebSocket.OPEN) {\n        sendMessage('heartbeat');\n      }\n    }, 30000);\n    \n    // Cleanup\n    return () => {\n      clearInterval(heartbeatInterval);\n      if (socket?.readyState === WebSocket.OPEN) {\n        socket.close();\n      }\n    };\n  }, []);\n\n  // Context value\n  const contextValue = {\n    socket,\n    isConnected,\n    connectionStatus,\n    sendMessage,\n    authenticate,\n    reconnect: connect\n  };\n\n  return (\n    <SocketContext.Provider value={contextValue}>\n      {children}\n    </SocketContext.Provider>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}