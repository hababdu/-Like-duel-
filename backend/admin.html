<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Server Admin Panel</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --danger: #e74c3c;
            --warning: #f39c12;
            --success: #2ecc71;
            --light: #ecf0f1;
            --dark: #2c3e50;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .header h1 i {
            color: var(--secondary);
        }

        .server-info {
            display: flex;
            gap: 20px;
            color: var(--dark);
        }

        .server-info .status {
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            background: var(--success);
            color: white;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .card h3 {
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            background: var(--light);
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
            margin: 10px 0;
        }

        .stat-label {
            font-size: 12px;
            color: #7f8c8d;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .online { color: var(--success); }
        .queue { color: var(--warning); }
        .games { color: var(--secondary); }
        .tournaments { color: var(--danger); }

        .table-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background: var(--primary);
            color: white;
            position: sticky;
            top: 0;
        }

        tr:hover {
            background: #f5f5f5;
        }

        .badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }

        .badge.online { background: var(--success); color: white; }
        .badge.offline { background: #95a5a6; color: white; }
        .badge.queued { background: var(--warning); color: white; }
        .badge.ingame { background: var(--secondary); color: white; }

        .controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .btn-primary { background: var(--secondary); color: white; }
        .btn-success { background: var(--success); color: white; }
        .btn-warning { background: var(--warning); color: white; }
        .btn-danger { background: var(--danger); color: white; }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal h3 {
            margin-bottom: 20px;
            color: var(--primary);
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: var(--dark);
        }

        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .log-entry {
            padding: 10px;
            border-left: 4px solid var(--secondary);
            margin-bottom: 10px;
            background: var(--light);
        }

        .log-error { border-color: var(--danger); }
        .log-warning { border-color: var(--warning); }
        .log-info { border-color: var(--secondary); }

        .timestamp {
            font-size: 12px;
            color: #7f8c8d;
        }

        .message {
            margin: 5px 0;
            font-weight: bold;
        }

        .data {
            font-size: 12px;
            color: #666;
            white-space: pre-wrap;
            word-break: break-all;
        }

        .refresh-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .stat-grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .server-info {
                flex-wrap: wrap;
                justify-content: center;
            }
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: var(--dark);
        }

        .error {
            color: var(--danger);
            padding: 10px;
            background: #ffebee;
            border-radius: 5px;
            margin: 10px 0;
        }

        .success {
            color: var(--success);
            padding: 10px;
            background: #e8f5e9;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>
                <i class="fas fa-gamepad"></i>
                Game Server Admin Panel
            </h1>
            <div class="server-info">
                <div class="status" id="serverStatus">Checking...</div>
                <div id="serverTime">--:--:--</div>
                <button class="refresh-btn" onclick="loadAllData()">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>
        </div>

        <!-- Dashboard Stats -->
        <div class="dashboard">
            <div class="card">
                <h3><i class="fas fa-users"></i> Players</h3>
                <div class="stat-grid">
                    <div class="stat-item">
                        <div class="stat-value online" id="onlinePlayers">0</div>
                        <div class="stat-label">Online</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value queue" id="queuedPlayers">0</div>
                        <div class="stat-label">In Queue</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3><i class="fas fa-trophy"></i> Games</h3>
                <div class="stat-grid">
                    <div class="stat-item">
                        <div class="stat-value games" id="activeGames">0</div>
                        <div class="stat-label">Active Games</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalGames">0</div>
                        <div class="stat-label">Total Games</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3><i class="fas fa-chess"></i> Tournaments</h3>
                <div class="stat-grid">
                    <div class="stat-item">
                        <div class="stat-value tournaments" id="activeTournaments">0</div>
                        <div class="stat-label">Active</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalTournaments">0</div>
                        <div class="stat-label">Total</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3><i class="fas fa-server"></i> System</h3>
                <div class="stat-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="memoryUsage">0%</div>
                        <div class="stat-label">Memory</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="uptime">0s</div>
                        <div class="stat-label">Uptime</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Online Players Table -->
        <div class="table-container">
            <h3><i class="fas fa-user-clock"></i> Online Players</h3>
            <div id="playersLoading" class="loading">
                <i class="fas fa-spinner fa-spin"></i> Loading players...
            </div>
            <table id="playersTable" style="display: none;">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Status</th>
                        <th>Game</th>
                        <th>IP Address</th>
                        <th>Connected</th>
                    </tr>
                </thead>
                <tbody id="playersBody">
                    <!-- Players will be loaded here -->
                </tbody>
            </table>
        </div>

        <!-- Active Games Table -->
        <div class="table-container">
            <h3><i class="fas fa-play-circle"></i> Active Games</h3>
            <div id="gamesLoading" class="loading">
                <i class="fas fa-spinner fa-spin"></i> Loading games...
            </div>
            <table id="gamesTable" style="display: none;">
                <thead>
                    <tr>
                        <th>Game ID</th>
                        <th>Player 1</th>
                        <th>Player 2</th>
                        <th>Mode</th>
                        <th>Round</th>
                        <th>Score</th>
                        <th>Started</th>
                        <th>Spectators</th>
                    </tr>
                </thead>
                <tbody id="gamesBody">
                    <!-- Games will be loaded here -->
                </tbody>
            </table>
        </div>

        <!-- Controls -->
        <div class="card">
            <h3><i class="fas fa-cogs"></i> Server Controls</h3>
            <div class="controls">
                <button class="btn-primary" onclick="showBroadcastModal()">
                    <i class="fas fa-bullhorn"></i> Broadcast
                </button>
                <button class="btn-warning" onclick="showLogsModal()">
                    <i class="fas fa-clipboard-list"></i> View Logs
                </button>
                <button class="btn-danger" onclick="showKickModal()">
                    <i class="fas fa-user-slash"></i> Kick Player
                </button>
            </div>
        </div>
    </div>

    <!-- Broadcast Modal -->
    <div id="broadcastModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-bullhorn"></i> Send Broadcast Message</h3>
            <div class="form-group">
                <label>Message Type:</label>
                <select id="broadcastType">
                    <option value="info">Information</option>
                    <option value="warning">Warning</option>
                    <option value="alert">Alert</option>
                    <option value="maintenance">Maintenance</option>
                </select>
            </div>
            <div class="form-group">
                <label>Target:</label>
                <select id="broadcastTarget">
                    <option value="all">All Players</option>
                    <option value="in_game">Only In-Game Players</option>
                    <option value="in_queue">Only Queued Players</option>
                </select>
            </div>
            <div class="form-group">
                <label>Message:</label>
                <textarea id="broadcastMessage" placeholder="Enter your message here..."></textarea>
            </div>
            <div id="broadcastResult"></div>
            <div class="controls">
                <button class="btn-success" onclick="sendBroadcast()">Send</button>
                <button class="btn-danger" onclick="hideModal('broadcastModal')">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Logs Modal -->
    <div id="logsModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-clipboard-list"></i> Server Logs</h3>
            <div class="controls" style="margin-bottom: 20px;">
                <select id="logTypeFilter" onchange="loadLogs()">
                    <option value="">All Types</option>
                    <option value="error">Errors</option>
                    <option value="warning">Warnings</option>
                    <option value="info">Info</option>
                </select>
                <select id="logLimit" onchange="loadLogs()">
                    <option value="50">Last 50</option>
                    <option value="100">Last 100</option>
                    <option value="200">Last 200</option>
                </select>
                <button class="refresh-btn" onclick="loadLogs()">
                    <i class="fas fa-sync-alt"></i>
                </button>
            </div>
            <div id="logsLoading" class="loading">
                <i class="fas fa-spinner fa-spin"></i> Loading logs...
            </div>
            <div id="logsContainer" style="display: none;">
                <!-- Logs will be loaded here -->
            </div>
            <div class="controls" style="margin-top: 20px;">
                <button class="btn-danger" onclick="hideModal('logsModal')">Close</button>
            </div>
        </div>
    </div>

    <!-- Kick Player Modal -->
    <div id="kickModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-user-slash"></i> Kick Player</h3>
            <div class="form-group">
                <label>Player ID:</label>
                <input type="number" id="kickPlayerId" placeholder="Enter Player ID">
            </div>
            <div class="form-group">
                <label>Reason:</label>
                <select id="kickReason">
                    <option value="cheating">Cheating</option>
                    <option value="abusive">Abusive Behavior</option>
                    <option value="spamming">Spamming</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div id="kickResult"></div>
            <div class="controls">
                <button class="btn-danger" onclick="kickPlayer()">Kick</button>
                <button class="btn-primary" onclick="hideModal('kickModal')">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const SERVER_URL = window.location.protocol + '//' + window.location.host;
        const ADMIN_TOKEN = prompt('Enter Admin Token:') || localStorage.getItem('adminToken');
        
        if (!ADMIN_TOKEN) {
            alert('Admin token is required!');
            localStorage.removeItem('adminToken');
            location.reload();
        } else {
            localStorage.setItem('adminToken', ADMIN_TOKEN);
        }

        // Headers for API requests
        const headers = {
            'Content-Type': 'application/json',
            'x-admin-token': ADMIN_TOKEN
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadAllData();
            setInterval(loadStats, 5000); // Refresh stats every 5 seconds
            setInterval(updateServerTime, 1000); // Update time every second
        });

        // Update server time
        function updateServerTime() {
            const now = new Date();
            document.getElementById('serverTime').textContent = 
                now.toLocaleTimeString('en-US', {hour12: false});
        }

        // Load all data
        async function loadAllData() {
            await loadStats();
            await loadPlayers();
            await loadGames();
            await loadSystemInfo();
        }

        // Load server stats
        async function loadStats() {
            try {
                const response = await fetch(`${SERVER_URL}/api/stats`, { headers });
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('onlinePlayers').textContent = 
                        data.stats.onlineNow || data.stats.activeUsers || 0;
                    document.getElementById('queuedPlayers').textContent = 
                        data.stats.inQueue || 0;
                    document.getElementById('activeGames').textContent = 
                        data.stats.activeGames || 0;
                    document.getElementById('totalGames').textContent = 
                        data.stats.totalGames || 0;
                    document.getElementById('activeTournaments').textContent = 
                        data.stats.activeTournaments || 0;
                    document.getElementById('totalTournaments').textContent = 
                        data.stats.totalTournaments || 0;
                    
                    document.getElementById('serverStatus').textContent = 
                        data.stats.databaseStatus === 'connected' ? '‚úÖ Online' : '‚ùå Offline';
                    document.getElementById('serverStatus').className = 
                        data.stats.databaseStatus === 'connected' ? 'status' : 'status offline';
                }
            } catch (error) {
                console.error('Error loading stats:', error);
            }
        }

        // Load online players
        async function loadPlayers() {
            const loading = document.getElementById('playersLoading');
            const table = document.getElementById('playersTable');
            const body = document.getElementById('playersBody');
            
            try {
                const response = await fetch(`${SERVER_URL}/admin/api/sessions`, { headers });
                const data = await response.json();
                
                if (data.success) {
                    loading.style.display = 'none';
                    table.style.display = 'table';
                    body.innerHTML = '';
                    
                    if (data.sessions.length === 0) {
                        body.innerHTML = `
                            <tr>
                                <td colspan="6" style="text-align: center; color: #7f8c8d;">
                                    No players online
                                </td>
                            </tr>
                        `;
                        return;
                    }
                    
                    data.sessions.forEach(player => {
                        const connectedTime = Math.floor((Date.now() - new Date(player.connectedAt).getTime()) / 1000);
                        const connectedStr = connectedTime < 60 ? 
                            `${connectedTime}s` : 
                            `${Math.floor(connectedTime / 60)}m ${connectedTime % 60}s`;
                        
                        const row = `
                            <tr>
                                <td>${player.userId}</td>
                                <td><strong>${player.firstName || 'Unknown'}</strong><br>
                                    <small>@${player.username || 'no-username'}</small>
                                </td>
                                <td>
                                    <span class="badge ${player.status}">${player.status}</span>
                                </td>
                                <td>${player.gameId ? 'üéÆ ' + player.gameId.substring(0, 8) + '...' : 'None'}</td>
                                <td><small>${player.ip || 'Unknown'}</small></td>
                                <td>${connectedStr}</td>
                            </tr>
                        `;
                        body.innerHTML += row;
                    });
                }
            } catch (error) {
                console.error('Error loading players:', error);
                loading.innerHTML = '<div class="error">Failed to load players</div>';
            }
        }

        // Load active games
        async function loadGames() {
            const loading = document.getElementById('gamesLoading');
            const table = document.getElementById('gamesTable');
            const body = document.getElementById('gamesBody');
            
            try {
                const response = await fetch(`${SERVER_URL}/admin/api/games`, { headers });
                const data = await response.json();
                
                if (data.success) {
                    loading.style.display = 'none';
                    table.style.display = 'table';
                    body.innerHTML = '';
                    
                    if (data.games.length === 0) {
                        body.innerHTML = `
                            <tr>
                                <td colspan="8" style="text-align: center; color: #7f8c8d;">
                                    No active games
                                </td>
                            </tr>
                        `;
                        return;
                    }
                    
                    data.games.forEach(game => {
                        const startedTime = Math.floor((Date.now() - new Date(game.createdAt).getTime()) / 1000);
                        const startedStr = startedTime < 60 ? 
                            `${startedTime}s ago` : 
                            `${Math.floor(startedTime / 60)}m ago`;
                        
                        const row = `
                            <tr>
                                <td><small>${game.gameId.substring(0, 12)}...</small></td>
                                <td>
                                    <strong>${game.player1.firstName || 'Player1'}</strong><br>
                                    <small>ELO: ${game.player1.elo || 1000}</small>
                                </td>
                                <td>
                                    <strong>${game.player2?.firstName || 'Waiting...'}</strong><br>
                                    <small>ELO: ${game.player2?.elo || 1000}</small>
                                </td>
                                <td>
                                    <span class="badge ${game.mode === 'ranked' ? 'ingame' : 'queued'}">
                                        ${game.mode}
                                    </span>
                                </td>
                                <td>${game.currentRound || 1}/${game.rounds || 3}</td>
                                <td>
                                    <strong>${game.scores?.player1 || 0}</strong> - 
                                    <strong>${game.scores?.player2 || 0}</strong>
                                </td>
                                <td>${startedStr}</td>
                                <td>${game.spectators || 0}</td>
                            </tr>
                        `;
                        body.innerHTML += row;
                    });
                }
            } catch (error) {
                console.error('Error loading games:', error);
                loading.innerHTML = '<div class="error">Failed to load games</div>';
            }
        }

        // Load system info
        async function loadSystemInfo() {
            try {
                const response = await fetch(`${SERVER_URL}/admin/api/system`, { headers });
                const data = await response.json();
                
                if (data.success) {
                    const memPercent = data.system.memory?.percent || '0%';
                    const uptime = Math.floor(data.system.uptime || 0);
                    
                    document.getElementById('memoryUsage').textContent = memPercent;
                    document.getElementById('uptime').textContent = formatUptime(uptime);
                }
            } catch (error) {
                console.error('Error loading system info:', error);
            }
        }

        // Format uptime
        function formatUptime(seconds) {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;
            
            if (hours > 0) return `${hours}h ${minutes}m`;
            if (minutes > 0) return `${minutes}m ${secs}s`;
            return `${secs}s`;
        }

        // Load logs
        async function loadLogs() {
            const loading = document.getElementById('logsLoading');
            const container = document.getElementById('logsContainer');
            const typeFilter = document.getElementById('logTypeFilter').value;
            const limit = document.getElementById('logLimit').value;
            
            try {
                const url = `${SERVER_URL}/admin/api/logs?limit=${limit}${typeFilter ? `&type=${typeFilter}` : ''}`;
                const response = await fetch(url, { headers });
                const data = await response.json();
                
                if (data.success) {
                    loading.style.display = 'none';
                    container.style.display = 'block';
                    container.innerHTML = '';
                    
                    if (data.logs.length === 0) {
                        container.innerHTML = '<div class="error">No logs found</div>';
                        return;
                    }
                    
                    data.logs.forEach(log => {
                        const time = new Date(log.timestamp).toLocaleTimeString();
                        const logClass = `log-entry log-${log.type}`;
                        
                        const logHtml = `
                            <div class="${logClass}">
                                <div class="timestamp">[${time}] ${log.type.toUpperCase()}</div>
                                <div class="message">${log.message}</div>
                                ${log.data ? `<div class="data">${JSON.stringify(log.data, null, 2)}</div>` : ''}
                            </div>
                        `;
                        container.innerHTML += logHtml;
                    });
                }
            } catch (error) {
                console.error('Error loading logs:', error);
                loading.innerHTML = '<div class="error">Failed to load logs</div>';
            }
        }

        // Send broadcast
        async function sendBroadcast() {
            const type = document.getElementById('broadcastType').value;
            const target = document.getElementById('broadcastTarget').value;
            const message = document.getElementById('broadcastMessage').value.trim();
            const resultDiv = document.getElementById('broadcastResult');
            
            if (!message) {
                resultDiv.innerHTML = '<div class="error">Please enter a message</div>';
                return;
            }
            
            try {
                const response = await fetch(`${SERVER_URL}/admin/api/broadcast`, {
                    method: 'POST',
                    headers: headers,
                    body: JSON.stringify({ message, type, target })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    resultDiv.innerHTML = `
                        <div class="success">
                            ‚úÖ Message sent to ${data.sentTo} players
                        </div>
                    `;
                    
                    // Clear message after 3 seconds
                    document.getElementById('broadcastMessage').value = '';
                    setTimeout(() => {
                        resultDiv.innerHTML = '';
                        hideModal('broadcastModal');
                    }, 3000);
                } else {
                    resultDiv.innerHTML = `<div class="error">${data.error}</div>`;
                }
            } catch (error) {
                console.error('Error sending broadcast:', error);
                resultDiv.innerHTML = '<div class="error">Failed to send broadcast</div>';
            }
        }

        // Kick player
        async function kickPlayer() {
            const playerId = document.getElementById('kickPlayerId').value;
            const reason = document.getElementById('kickReason').value;
            const resultDiv = document.getElementById('kickResult');
            
            if (!playerId) {
                resultDiv.innerHTML = '<div class="error">Please enter player ID</div>';
                return;
            }
            
            try {
                // First, let's get player session
                const sessionsResponse = await fetch(`${SERVER_URL}/admin/api/sessions`, { headers });
                const sessionsData = await sessionsResponse.json();
                
                if (sessionsData.success) {
                    const player = sessionsData.sessions.find(p => p.userId == playerId);
                    
                    if (!player) {
                        resultDiv.innerHTML = '<div class="error">Player not found or not online</div>';
                        return;
                    }
                    
                    // Send kick notification
                    const response = await fetch(`${SERVER_URL}/admin/api/broadcast`, {
                        method: 'POST',
                        headers: headers,
                        body: JSON.stringify({
                            message: `You have been kicked from the server. Reason: ${reason}`,
                            type: 'alert',
                            target: 'all' // We'll filter by player later
                        })
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        resultDiv.innerHTML = `
                            <div class="success">
                                ‚úÖ Player ${playerId} (${player.firstName}) has been kicked
                            </div>
                        `;
                        
                        // Reload players
                        setTimeout(() => {
                            loadPlayers();
                            hideModal('kickModal');
                        }, 2000);
                    }
                }
            } catch (error) {
                console.error('Error kicking player:', error);
                resultDiv.innerHTML = '<div class="error">Failed to kick player</div>';
            }
        }

        // Modal functions
        function showBroadcastModal() {
            document.getElementById('broadcastModal').style.display = 'flex';
            document.getElementById('broadcastResult').innerHTML = '';
        }

        function showLogsModal() {
            document.getElementById('logsModal').style.display = 'flex';
            loadLogs();
        }

        function showKickModal() {
            document.getElementById('kickModal').style.display = 'flex';
            document.getElementById('kickResult').innerHTML = '';
        }

        function hideModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Logout function
        function logout() {
            localStorage.removeItem('adminToken');
            location.reload();
        }

        // Add logout button to header
        document.querySelector('.header').innerHTML += `
            <button class="btn-danger" onclick="logout()" style="margin-left: 10px;">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        `;
    </script>
</body>
</html>